const input = `######..#
.##....#.
.....##.#
.....##.#
.##..#.#.
######..#
#..#..###
.##..#.##
#####.#.#
#..#.##..
.....###.
#####....
....##.#.

##..###.###..
##.#.#..##..#
..#.#...#.#.#
######.#.####
##..#.##....#
##.##.#..#.#.
#####....#.#.
###.########.
#######..#.##
..####..##..#
......#.###..
......#.###..
..####..#...#

....#....##..##..
##.#.....#....#..
....##...#.##.#..
..##..#####..####
###..##..######..
.....##.#.#..#.#.
.#.#####.##..##.#
###.###...####...
....####.#....#.#

#.##.#.####.#
.#..#..#..#..
.####.#....#.
#....#......#
.#..#.#....#.
.##.#.######.
#....########
#....##....##
########..###
.#..#..####..
.#..#..####..
..##....##...
.####...##...
.#..#.##..##.
##..#########

#.##.#.##
#....##..
.......##
#....##..
#....####
#.####.##
.####.###

.###.####
.##.##..#
.###.####
#....#..#
....#....
##.##....
##.###..#
#..#..##.
.#...#..#
....#....
##.######
...###.##
#.###....
##.#.####
##.#.####

......##.##
####..###..
.##....#.#.
######.####
######.####
.##....#.#.
####..###..
......##.##
.##.##.##.#
...##..###.
....###.##.
#..#......#
....##.....
#####.#.#..
.....#..##.

###.....###..##
#.#..#..##...##
..##.#...###.##
..##.#...##..##
#.#..#..##...##
###.....###..##
.##.#...#.#...#
##...#####.###.
##.#...###....#
#.####..#.#.#..
#.##..###.###..
#.##..###.###..
#.####..#.#.#..
##.#...###....#
##...#####.###.

..###..#....#..
##.....#.##.#..
###....#.##.#..
###.#..#....#..
..##.#........#
####...........
..##...##..##..
##...#.######.#
..#.#.########.
##....#.####.#.
##.#.####...###
##...#.#....#.#
##...##.#..#.##

##..#..#..##..#
.###....###.#..
.#...##...#..#.
..##.##.##.....
.#.#.##.#.#.#.#
.....#........#
.#..####..#.##.
####.##.####.##
####.##.####.##

.#.#..####.
#.####.##.#
..#..######
..#...####.
..#...####.
..#..######
#.####.##.#
.#.#..####.
#..#.##..##
#.#.#######
###........
....##....#
..#.###..##
...#..#.##.
.#.#.##..##

##...#...##.#.#.#
##.#.......#.#.##
##.#.......#.#.##
##.......##.#.#.#
###....#.##.#...#
.#.#.#..#.###.##.
.#...#..##.......
#..#.#....#.##.##
.#.##...###.#..##
.##.#.#.#.#...###
#...##..#...#.##.
.#.####...#..#.##
.#.####...#..#.##
#...##..#...#.##.
.##.#.#.#.#...###

.....#.##..##.#
.....#.##..##.#
.##.##.##..##..
....#..#....#..
#..#.###....###
##..#.##.##.##.
#...##........#
.#..#.###..###.
..##...#....#..
#....#.##..##.#
#.##..###..###.

.##.....#..#.
.##..#.######
#.#...#......
.###..#......
..#..#..#..#.
..#..#..#..#.
.###.##......
#.#...#......
.##..#.######
.##.....#..#.
........####.
.####.##....#
.#.##.#......
######..####.
.#.##..##..##
....##.#....#
.###.#.######

###.#.####.#.
###.#.####.#.
...#.#.##.#.#
###...#..#...
.#.#.#....#.#
##..#..#...#.
..###..##..##
####..#..#..#
#...#......#.
..##..####..#
.#..########.
.#.#.#....#.#
#..####..####
.#...........
#.#.#.#..#.#.

#.#....
#.#....
#..#..#
..##..#
#......
#......
..#.##.
#.#.##.
#.##...
..#.##.
#.#.##.
#.#####
#.#####
.#.####
##..##.

.##.....###
#..###.##.#
.##..#.##..
.....#.#.#.
#..##.#..##
#..##.#..##
.....#.#.#.
.##..#.##..
#..###.##.#
.##..#..###
#..##..##.#
####...##.#
#..#.#.#.#.
........#.#
....####...
....#.###.#
.##.#.#..#.

###.######.
...##.##.##
.###.#..#.#
....######.
.#.########
#####....##
..##..##..#
#.##..##..#
##....##...
.#..#......
#####....##
##....##...
.##.######.
###..####..
....#.##.#.
....#.##.#.
###..####..

#.####..####.##..
##..##..##..##.##
.#....##....###..
###...##...###.##
#.#........#.#.##
.#.##....##.#.###
.#..........#....
.#..........#.###
##.##.##.##.#####
##..........#####
.#..........#.###
.#####..#####....
#..##....##..##..

#.##.#.####
.###.######
#..#....##.
#...#######
##.##..#..#
...#.######
#.##.......
.#.........
##.####.##.
#..####.##.
.#.........
#.##.......
...#.######
##.##..#..#
#...#######
#..#....##.
.###.######

.#...###...
.....##.###
..#..##.#..
####.......
..##..#.##.
######.###.
########..#
########..#
######.###.
..##..#.##.
####.......

##....###..
###..####..
..#..#..##.
...##...#.#
.#.##.#.##.
##.##.####.
########.##
..#..#..##.
########.#.
##.##.##...
...##...###
#########..
...##....##

#.....###....
#.##.####.##.
#..#..##..#..
##...#..#...#
.....#..#....
####..##..###
..##......##.
##..######..#
##.##....##.#
##.##....##.#
##..######..#

.####.##.#.#..##.
.....######..#..#
..#..######..#..#
.####.##.#.#..##.
######..##...####
#..##.#..#.######
..#....#.##......
.##.#..###...####
.....#..#..##....
##.#..##.###..##.
#..##.#.##.#.#..#
..##.#.##...##..#
####.......#.....
.###.####...##..#
#..#..#.#####....
###.#.#..###.....
####...######....

#####.###...#
##..#.#.###..
#..#..##..#.#
##...##.#..#.
#####....##.#
.....##...###
#####.#.#.###
#####.#.#.###
.....##...###

..#####
.#.....
.######
#..####
.######
..#....
###....
###....
##.####
..#.##.
.#.####
.######
.#.####
#.#####
##.....

####....#...#.###
.#..#..####.##..#
.##.##.##..#####.
......##.##.#####
###.#.##.#####.##
.####....#...####
.##.#....#...####
###.#.##.#####.##
......##.##.#####
.##.##.##..#####.
.#..#..####.##..#
####....#...#.###
####....#...#.###

###...#..#...##
...#......#.#..
....#......#...
##..#.####.#..#
##..#.#..#.#..#
##.#.######.#.#
....#.####.#...
..##.#.##.#.##.
##...######...#
###.#..##..#.##
..#..######..#.

.##..##..##..####
####.##.####.....
.###.##.###..####
..#.#..#.#...####
.............#..#
...######...#.##.
..#.#..#.#..####.

##.##.#.#
###.#.#.#
###.#.#.#
##.####.#
...#####.
...######
...#..###
..######.
##...##.#
##...#..#
#####.#..

#.###..
####.##
.#.##..
....###
.##....
.##....
.#..###

......#....#.....
#..#.########.#..
.##.##......##.##
....#.######.#.#.
.#..##########..#
#.#..###..###..#.
####..######..###
#.##..#.##.#..##.
#..#..######..#..
.#.#..##..##..#.#
#.#...#.##.#...#.
.#.##.#.##.#.##.#
.#.##.#.##.#.##.#

###..##
#....##
###..#.
##.....
..#..##
#....##
#...###
###.###
..##.##
...##..
...##..
..##...
##.#...
..#....
.##.###
###....
###....

####.###..#
.......###.
......####.
####.###..#
###..#.####
###.#....##
..#.#.....#
###.##.#.##
##.###.###.
####.##.#..
##..#.#.#..

#..##.....##.
.......#..#.#
.##..#...#.##
.##..#...#.##
.......#..#.#
#..##.....##.
.##..#.######
######.##....
####...##....
....#.##.#.##
#.....####...
.##..###.....
#####..#....#

#..####..#...
####..#####..
###....###.#.
..#....#..#..
.#.#..#.#.###
.###..###....
###########..
#...##...#.##
...........##
..#....#...##
#.#....#.####

.##...#.#
.##..#...
.##.###..
.##..#.#.
.##....##
#####.##.
.##...###
#..#..#.#
#..#..#.#
.##...###
########.
.##....##
.##..#.#.
.##.###..
.##..#...

.##.#....###..#
.##.#....###..#
..#######......
.######.#.##.##
..#.#..#...###.
##....#.#.###..
##....#.#.###..
..#.#..#...###.
.######.#.##.#.
..#######......
.##.#....###..#

.##..####..
.##..####..
###...##...
...###..###
..#.#.##.#.
...######.#
...#..##..#
...#.#..#.#
#.#.##..##.

##.#.........
#.####..##..#
##.#.########
##.##........
##.##########
#.#..........
.#.#.........
#.###########
.###.#......#
###..........
#.#.#.##..##.
.#....##..##.
#.#...##..##.
.##.##..##..#
.#.#.#..##..#

...####
...####
.#..#..
######.
##.#..#
##.#.##
######.
.#..#..
...####

.....#.
###.##.
##...#.
####.##
####.##
##...#.
###.##.
.....#.
#.##...
###..#.
###.###
....##.
##.#.##

##.#....#
##.#.##.#
...#....#
..#.####.
....####.
##...##..
....####.
####.##..
..#......
##...##..
###.####.
#####..##
###..##..

..##..###
..##.##..
..##.##.#
..##..###
##.....##
.....##..
..##...#.
##.#...#.
##.###..#

.####...##...
..#....#..#..
#####.##..##.
#..#.##.##.##
...##.#.##.#.
####...####..
#.......##...
#..#....##...
####...####..

#.##..#
...####
...####
#.##..#
...##..
###.#..
###..#.
.....##
##.#...
#.#..##
.##...#
.##...#
#.##.##

.##...##.##.##...
.#.####..##..####
.#.####..##..####
.##...##.##.##...
####.##.####.##.#
##.#####....#####
#.###..#....#..##
...##..........##
.#.###.######.###
#.##.####..####.#
..##.....##.....#
.#..#...#..#...#.
#.##...##..##...#
#.#.#.##.##.##.#.
.#..####....####.
#...####.##.###..
...#..#.####.#..#

....#.##..#.#.##.
#..##..#..#.#...#
.##.##.#.#..#.##.
.....#....#.#.##.
####.###....#....
#..#.#.#.#..#....
#..###.##....####
####..#....#.#..#
####.#...###.#..#
#####..#.###.....
####.#####.#.#..#
#####.#.###...##.
####.##..#...####

.......##......
....########...
#####.####.####
##..#.####.#..#
##.##......##.#
....###..###...
...#..#..#..##.

..........###..
#.####.##..#...
#.#..#.##.#...#
.######.###..##
...##...##.####
########..##...
............#..

....#.###.#..
#..#...#...#.
....#.##.####
....#.##.####
#..#...#...#.
....#.###.#..
......##.####
.###.#####.##
####.#####.##
....#.##....#
....##..#..#.
.##.###....#.
.##....####..
#####...#.#..
######.#..###

.##.###
...#...
###.###
.#.....
#.#.#..
####...
..##...
##.#...
#......
.#.##..
#.#.###
..#####
..#####
..#.###
.#.##..

####.#.####
####.#..##.
#...#.##..#
#...#.##..#
####.#..##.
####.#.####
#.#...#....
#.....##..#
#.#.##..##.
.###.#..##.
##...#.....
.###..#....
.####.#.##.
....#...##.
.####....#.

....#####
....#....
####.#..#
.....####
#..######
#..#.....
#####....
###.#####
#####.##.
#..##....
.##.#....
####.####
#..#.####

######..##.#.#.##
#.........####...
###.##.....#.##..
##.#.###..###..##
###..#...#....###
#.#...#.#######..
.#..#.###.#.##...
.##...####.#..###
.##....#....#.#..
.#.##.#..#..#####
##....###......##
...##.######..#..
....#.#..#.######
##...###..##..###
##.#.###..##..###

.....###..###.#..
#####.#...#......
#####.##.#..#....
.##.##.#.###.#.##
......#..###.##..
....#...#.####...
.....####.#.###..
......#.##.##.#..
...##.##....#.#..
#..##.##.###..###
#..#..###.###..##
#..#...#....###..
....#....##.#..##

....#....
##.######
##.#.....
##.#.####
##..#...#
..#.#.##.
......##.
###..####
..##.#..#

..##..#
##.....
...####
...####
##.....
..##..#
#.#.#..
#.##...
#..##.#
####...
####...
#..##.#
#.##...
..#.#..
..##..#

...##.#######
...##.#.#####
#....#..#..##
#..########..
#.##...#...##
.#....#...#..
.#....#...#..
#.##...#...##
#..########..
#....#..#..##
...##.#.#####
...##.#######
.####.....###
######.#.#..#
..#..#.#.####
...#..#..####
..####..###.#

########.
.......##
.####.#..
..##...##
#....#.#.
..##....#
######...
.#..#..##
##..###..
......##.
..##..##.
#.#..##..
.#..#..##
#....##.#
#....##.#

######.####
#.##.######
.#..#.##..#
...#..##..#
######.#..#
.####...##.
.......####
######.#..#
#....##....
.####.#....
......#####
######.####
#....##.##.

.####.###.#
.#..#......
##..#######
#.##.#..###
#######..##
######.###.
##..##...#.
##..##.#.#.
######.###.

.##...##..#.#
#..#.#..#....
.##.##.##..#.
.##..#.#.###.
.....#.#.#...
.##.#.###...#
####..###...#
####..###...#
.##.#.###...#
.....#.#.#...
.##..#.#####.

#.#.#...###
#.....#.#..
###.##.##..
######.####
####.#.#..#
###..##..#.
.###..#.#.#
.###..#.#.#
###.###..#.
####.#.#..#
######.####
###.##.##..
#.....#.#..
#.#.#...###
####...####
####...####
#.#.#...###

###...#...#.##.
.#######.#.####
.#######.#.####
###...#...#.##.
#.#####...#..#.
##..#..##..#..#
#..##.##..##..#

#..#..#..######..
#.#.##.#.#.##.#.#
..##..##...##...#
....##...........
.########.#..#.##
#...##...######..
.#......#.#..#.#.
#.##..##.######.#
....##.....##....
##......##....##.
...####...#..#...
#.#....#.#.##.#.#
..#.##.#........#
#####.####....###
.###..###.#..#.##
##......##....##.
..#.##.#..####..#

##.########
.#..#....#.
####.#..#.#
#.##.#..#.#
.#..#....#.
##.########
#.#..#..#..
#..#..##..#
##...####..
.##########
.#.########
..###.##.##
.#....##...
##...####..
##..#....#.
##..######.
..#.##..##.

.#..#.#.#.###.##.
.#..#.#.#.##..##.
......####....#..
.#..#...##..####.
######.###...####
.#..#..#....#.#.#
......##...#.....
#######.#.#######
.#..#..##..##.##.

.###.#.##......
.......###.##.#
.##..#..#.#..#.
#..##.####.##.#
####.#..###..##
#..##.....####.
#..#...##.#..#.
....#.....#..#.
####..###......

#.#..##.####.
#.#..##.####.
.##..#.#.....
#.###.#..#...
....#.####..#
...#.##..###.
.###..#.#....
..#....#.....
.#.##..#..##.
.#.##..#..##.
..#....#.....
.###..#.#....
...#.##..###.
....#.####..#
#.###.#..#...
.##..#.#.....
..#..##.####.

...######..
####.#..#.#
.#...#..#..
#..###.#...
#..###.#...
.#...#..#..
.###.#..#.#
...######..
..##..#..#.
..##.##.##.
##.#####..#
....#.###.#
#########..
#.#...##...
#.#...##...
#########..
....#.###.#

##....####..###..
########..#.##...
########..#.##...
##....####..###..
........####....#
.#.##.#.##.#..#.#
........##.######
.##...#....#.###.
.######....#.#..#
.#....#.#..###.#.
.##..##...#...##.

###.##.....
#..#.###.##
#..#..##...
#.#..#.##..
.##.###.##.
###....####
.##..#.#...
.##..#.#...
###....####
.##.###.##.
#.#..#.##..
#..#..##...
#..#.###.##
###.##.....
###.##....#

#..#.....#.####.#
####.#.#..#....#.
#####..#.........
#.#####.##..##..#
#..#.#.#...####..
#..#.##....####..
#..#####.###..###
.##.#....#..##..#
#..##.#.##.#..#.#

##..#..#.##.##.##
##..#..#.##..#.##
.#####..##.##..##
..#.###.###..#..#
..#.###.###..#..#
.#####..##.##..##
##..#..#.##..#.##
##..#..#.##.##.##
#...###..#.##...#
#........#..#.##.
#...#.#...#.##...

#....##.#..
#.##.#..###
.####.##..#
.####.##..#
#.##.#...##
#....##.#..
##..##.#..#

.#.#..#.#.#.#..##
.##....##..#.####
####..####..#.#..
.##.##.##.#...#.#
..######..##.....
..######..##..#..
.##.##.##.#...#.#

.####.#
.####..
.####.#
#....#.
#.##.##
##..###
.####..

#..#.#..###...##.
#..#.#..###...##.
#.#.....##.#.##.#
#..#####...#.#.##
##....###......##
##..###.#.###..##
.#....###...#..##
#.###.#...#.....#
##.....#...##.###
......#..########
##.#############.
.#.#.##.....####.
###.##.###.###..#
####.###..#.#.#..
#.##.#......#.##.
#####.....#..#..#
#####..#..#..#..#

.##.####.##....##
####.##.######...
#.#..##..#.#...##
##.#....#..#.#...
...#.##.#....#...
#..........#.....
#.##....##.#..###
#..#.##.#..##.###
............#.###
...#.##.#...#..##
#.##.##.##.#.#...
...#.##.#........
...######....#...
#.#.####.#.##.#..
##.#....#.####.##
...#.##.#....####
.#.#....#.#...###

...##.##..####.
..##.#.#.#.####
##.#.#.###.##..
......#.#####..
..##..#.####.##
..##...#.#.#...
..#.#.#...#....
#####.##.##.#..
##.###.##......
..#..##..#.##..
....#....##.#..
...#.#.#.#.####
##.#.##.#.##.##
###..#....###..
..##.#..#.#..##
..##..#.##..###
..#..#.##.###..

.....##..#.#.##.#
#..####.#.##..##.
..##..##.#......#
.##.###.###....##
#..#.#..#........
..##.##..###..###
.##....#.#..##..#
##.#.##..........
##.#.##..........

#..##....
#....#.#.
##.###.##
.####.###
#.#######
..#.###..
..#.###..

.#.###.#...
#.#.#.#..##
###..#..#..
#.#..#..#..
#.#.#.#..##
.#.###.#...
#......####

#.#..#..#..#.##
.#.########.#..
.#...##.#...#..
.#.#......#.#..
###...##...####
.#..........#..
...#......#....

...#.#####.#.
.#.#.....#..#
#.##..#.#.###
#.##..#.#.###
.#.##....#..#
...#.#####.#.
######......#
###.####.####
..##.###.###.
###......##..
...##.#....#.
...##.#....#.
###......##..
..##.###.###.
###.####.####
######......#
...#.#####.#.

##.#....#.#
.#.##..##.#
..###...##.
#..######..
#...#..#...
#..#....#..
.###.##.###
.####..####
#.##.##.##.
#..######..
...#.##.#..
...#.##.#..
#..######..
#.##.##.##.
.####..####
.###.##.###
#..#....#..

####.#.####.####.
#.#.#..######..##
.##.##.....#....#
.##.####...######
...#..#.#.###..##
.####.###.###..##
#.##..#.#....##..
#....##.#..######
#....###..##.##.#
#....####.##.##.#
#....##.#..######
#.##..#.#....##..
.####.###.###..##
...#..#.#.###..##
.##.####...######
.##.##.....#....#
#.#.#..######..##

.#.####.#.#....
.#.####.#.#....
.##......##...#
.#...#....#.#..
###..#.#..#.#.#
####....#.##..#
.#.#..##.#.##.#
.##....###..#.#
..##.##.##...#.
.#.#.....#....#
.#.#.....#....#
..##.##.##...#.
.##....###..#.#
.#.#..##.#.##.#
####....#.#...#

....#..
#.##..#
#####..
.##.##.
####.##
####.##
#..###.
#..##..
#####..
.....##
.....##

##.#....#..#...#.
####..#..#####...
####..#..#####...
##.#....#..#...#.
####.##.#.#.#...#
#####....##.####.
.#####..###.#..#.
######.##...#.#..
...###.....#.####
###.##..##..####.
..#.##.......####

##.#..#.#.#
##.##.#.#.#
####.#..#.#
..##.####..
##.####.#..
....##..#.#
..##.###.#.
#####.###..
######....#
##.#####.##
..#.##.#.#.

.##...#
....###
####.##
####.##
....###
.##...#
.....#.
#..#...
.##.#..
...##.#
....#..

#######..####
####.##..#...
#..##..#...#.
.#####....###
.##.....##...
....#.###..##
#..#..##..##.
........###.#
........###.#

####...##
###..#...
###.##...
####...##
#.#..#..#
#.###....
....##.##
.#...####
#.#..#..#
###....##
.....##..
.....##..
###....##

#.#...#..#...
...##.####.##
...##.####.##
#.....#..#...
.##..##..##..
...#...##...#
#...#.####.#.
##...#.##.#..
#..##......##
#.##...##...#
##....####...

#..###.##
#..#.#.##
..##.###.
..##.#.##
##...##.#
##...##.#
..##.#.##
..##.###.
#..#.#.##
#..###.##
.###..#.#

...#.###....#
..#.###.####.
.#.#..#######
.#####.#.##..
#.#.#.#..##..
##.###.......
##.###.......

#.##..##.##.#
...####......
#..####..##..
##.####.####.
####..#######
##..##..####.
##..##..####.
#..#..#..##..
..##..##....#
..#....#....#
...#..#......
.##..#.##..##
.#..##..#..#.
#.#.##.#.##.#
.########..##

##....##.####
.#...##.###..
.#.#.....#.#.
.##..#.#.#.##
.....#.##.#.#
.....#.##.#.#
.##..#.#.#.##
.#.##....#.#.
.#...##.###..
##....##.####
.############
..####.###.##
..####.###.##
.############
##....##.####`;

function equals(a: string[], b: string[]) {
  return a.join('') === b.join('');
}

function indexOfDifferences(a: string[], b: string[]) {
  const differences: number[] = [];

  for (let i = 0; i < a.length; i++) {
    if (a[i] !== b[i]) {
      differences.push(i);
    }
  }

  return differences;
}

function flip(matrix: string[][], x: number, y: number) {
  matrix[y][x] = matrix[y][x] === '.' ? '#' : '.';
}

console.log(input.split('\n\n').reduce((acc, page) => {
  const matrix = page.split('\n').map((line) => line.split(''));
  let horizontal = 0;
  let vertical = 0;
  const flipped: [[number, number, number] | undefined, [number, number, number] | undefined] = [undefined, undefined];

  for (let i = 1; i < matrix.length; i++) {
    let distance = 0;
    let mirror = true;

    while (i - distance - 1 >= 0 && i + distance < matrix.length) {
      const above = matrix[i - distance - 1];
      const below = matrix[i + distance];

      if (!equals(above, below)) {
        if (flipped[0]) {
          mirror = false;
          break;
        }

        const differences = indexOfDifferences(above, below);

        if (differences.length === 1) {
          const x = differences[0];
          const y = i - distance - 1;

          flipped[0] = [i, x, y];
          flip(matrix, x, y);
        } else {
          mirror = false;
          break;
        }
      }

      distance++;
    }

    if (flipped[0]?.[0] === i) {
      if (mirror) {
        horizontal += i;
        break;
      } else {
        flip(matrix, flipped[0][1], flipped[0][2]);
        flipped[0] = undefined;
      }
    }
  }

  if (!horizontal) {
    for (let i = 1; i < matrix[0].length; i++) {
      let distance = 0;
      let mirror = true;

      while (i - distance - 1 >= 0 && i + distance < matrix[0].length) {
        const left = matrix.map((line) => line[i - distance - 1]);
        const right = matrix.map((line) => line[i + distance]);

        if (!equals(left, right)) {
          if (flipped[0] || flipped[1]) {
            mirror = false;
            break;
          }

          const differences = indexOfDifferences(left, right);

          if (differences.length === 1) {
            const x = i - distance - 1;
            const y = differences[0];

            flipped[1] = [i, x, y];
            flip(matrix, x, y);
          } else {
            mirror = false;
            break;
          }
        }

        distance++;
      }

      if (flipped[1]?.[0] === i) {
        if (mirror) {
          vertical += i;
          break;
        } else {
          flip(matrix, flipped[1][1], flipped[1][2]);
          flipped[1] = undefined;
        }
      }
    }
  }

  return acc + (horizontal * 100) + vertical;
}, 0));

// Answer: 24847
